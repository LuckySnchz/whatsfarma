<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OFERTAS</title>

   <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link href="https:fonts.googleapis.com/css?family=Muli" rel="stylesheet">
      <link rel="stylesheet" href="https:stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">  

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style type="text/css">
    
    .grid-container {


  display: grid;
  grid-template-columns: auto auto auto;
  width: 90%;
  margin-left: 5%;

}

    .grid-container-uno {


  display: grid;
  grid-template-columns: auto;
  width: 90%;
  margin-left: 5%;

}
    .grid-container-dos {


  display: grid;
  grid-template-columns: auto auto;
  width: 40%;


}

.grid-item { 
 

  font-size: 10px;
  text-align: right;

}

.topnav .search-container button {
  float: right;
  padding: 6px 10px;
  margin-top: 8px;
  margin-right: 16px;
  background: #ddd;
  font-size: 17px;
  border: none;
  cursor: pointer;
}

.topnav .search-container button:hover {
  background: #ccc;
}

@media screen and (max-width: 600px) {
  .topnav .search-container {
    float: none;
  }
  .topnav a, .topnav input[type=text], .topnav .search-container button {
    float: none;
    display: block;
    text-align: left;
    width: 100%;
    margin: 0;
    padding: 14px;
  }
  .topnav input[type=text] {
    border: 1px solid #ccc;  
  }
</style>
</head>
<body>
    <!--FARMAONLINE
https://devhints.io/xpath
https://stackoverrun.com/es/q/4034565-->

<section class="container jumbotron shadow p-3 mb-5 bg-white rounded"style="height: 10000px;text-align: center;width: 100%" > 

 <section class="container jumbotron shadow p-3 mb-5 bg-white rounded"style="height: 180px;text-align: center;width: 90%; margin-left: 5%" >
    <h1>
OFERTOMETRO!</h1>
<h2>Compara Tus Ofertas</h2><br>
</section>

 <section class="container jumbotron shadow p-3 mb-5 bg-white rounded"style="height: 50px;text-align: center;width: 90%; margin-left: 5%;margin-top: -28px" >
       
{{ $marcasearch ?? '' }}
  <div class="search-container">
    <form action="ofertashoy" method="get">
      <input type="text" disabled placeholder="Bucar Por Marcas" name="search">
      <button type="submit" disabled><i class="fa fa-search"></i></button>
    </form>

</div>
    </section> 

           


 <div class="grid-container" style=";margin-top: -25px">   


<!--WALMART ARROZ
https://www.walmart.com.ar/arroz-y-legumbres/arroz-largo
https://www.walmart.com.ar/arroz-y-legumbres/arroz-parboril
https://www.walmart.com.ar/arroz-y-legumbres/arroz-doble
https://www.walmart.com.ar/arroz-y-legumbres/arroz-integral
https://www.walmart.com.ar/arroz-y-legumbres/arroz-especial
https://www.walmart.com.ar/arroz-y-legumbres/arroz-preparado-->
<!--NO TIENEN ARROZ ORGANICO NI PARA SUSHI, NI AROMATICO-->

<!--ACEITE OK!!!



  https://www.walmart.com.ar/aceites-y-aderezos/aceites/acuenta?PS=15----ACUENTA---
  https://www.walmart.com.ar/aceites-y-aderezos/aceites/altavia?PS=15---ALTAVIA---
  https://www.walmart.com.ar/aceites-y-aderezos/aceites/canuelas?PS=15----CAÑUELAS--
  https://www.walmart.com.ar/aceites-y-aderezos/aceites/cocinero?PS=15---COCINERO---
  https://www.walmart.com.ar/aceites-y-aderezos/aceites/dos-anclas?PS=15---DOS ANCLAS---
  https://www.walmart.com.ar/aceites-y-aderezos/aceites/generico?PS=15---GENERICO---
  https://www.walmart.com.ar/aceites-y-aderezos/aceites/great-value?PS=15---GREAT VALUE---
  https://www.walmart.com.ar/aceites-y-aderezos/aceites/la-toscana?PS=15---LA TOSCANA---
  https://www.walmart.com.ar/aceites-y-aderezos/aceites/lira?PS=15---LIRA---
  https://www.walmart.com.ar/aceites-y-aderezos/aceites/mazola?PS=15---MAZOLA---
  https://www.walmart.com.ar/aceites-y-aderezos/aceites/natura?PS=15---NATURA---
  https://www.walmart.com.ar/aceites-y-aderezos/aceites/nuecete?PS=15---NUCETE---
  https://www.walmart.com.ar/aceites-y-aderezos/aceites/oliovita?PS=15---OLIOVITA---
  https://www.walmart.com.ar/aceites-y-aderezos/aceites/pureza?PS=15---PUREZA---
  https://www.walmart.com.ar/aceites-y-aderezos/aceites/sojola?PS=15---SOJOLA---
  https://www.walmart.com.ar/aceites-y-aderezos/aceites/yancanelo?PS=15---YANCANELO---
  https://www.walmart.com.ar/aceites-y-aderezos/aceites/zuelo?PS=15----ZUELO--


-->
<!--ATUN  
https://www.walmart.com.ar/conservas/conservas-de-pescado/acuenta?PS=15---ACUENTA---
https://www.walmart.com.ar/conservas/conservas-de-pescado/finisterre?PS=15---FINISTERRE---
https://www.walmart.com.ar/conservas/conservas-de-pescado/la-campagnola?PS=15---LA CAMPAGNOLA---


-->

<?php
$html = file_get_contents('https://www.walmart.com.ar/checkout#/cart');
      $dom = new DOMDocument(); // creamos un nuevo documento
      @$dom->loadHTML($html); // cargamos el código html
      // obtenemos todo de la pagina
      $xpath = new DOMXPath($dom);
 ?>

<!--NOMBRE DEL PRODUCTO WALMART-->

<div class="flex-container" style="line-height: 3.8em;">
<?php
echo '<b>'.'PRODUCTO'.'</b><br>';
$hrefs = $xpath->evaluate("//*[@class='prateleira__name']");
    $arraynames=[]; 
     for ($i = 0; $i <$hrefs->length; $i++) {
             $href = $hrefs->item($i);
             $res=$href->textContent;
          $res=strtoupper($res);

             $arraynames[]=$res;

            echo '<b>'.$res.'</b><br>';
            
  }
  $newarraynames=[]; 
  for ($i = 0; $i <sizeof( $arraynames); $i++) {
         $res=$arraynames[($i)];
  $newarraynames[]=$res;
              
              // echo '<b>'.$res.'</b><br>';           
  
      }?>


 

  </div>
<!--CODIGO DEL PRODUCTO WALMART-->

<div class="flex-container" style="line-height: 3.8em;">
<?php
echo '<b>'.'CODIGO'.'</b><br>';
$hrefs = $xpath->evaluate("//div[@class='fn productName']");
    $arraycod=[]; 
     for ($i = 0; $i <$hrefs->length; $i++) {
             $href = $hrefs->item($i);
             $res=$href->textContent;
        

             $arraycod[]=$res;

            echo '<b>'.$res.'</b><br>';
            
  }
  $newarraycod=[]; 
  for ($i = 0; $i <sizeof( $arraycod); $i++) {
         $res=$arraycod[($i)];
  $newarraycod[]=$res;
              
              // 
//echo '<b>'.$res.'</b><br>';           
  
      }?>


 

  </div>
<!--PRECIO WALMART--> 
<div class="flex-container precio" style="line-height: 3.8em;">   
  

<?php  

echo '<b>'.'PRECIO'.'</b><br>';

      //PRECIO WALMART//
$hrefs = $xpath->evaluate("//*[@class='prateleira__best-price']");
 $arrayprices=[]; 
 
     for ($i = 0; $i <$hrefs->length; $i++) {

             $href = $hrefs->item($i);
             $res=$href->textContent; 

              $res=str_replace('$', '', $res);
             $res =  (float) $res;

   $arrayprices[]=$res; 

                         
             
         
    }

       $newarraybestprices=[];

    for ($i = 0; $i <sizeof( $arrayprices); $i++) {
               $res=$arrayprices[($i)];
               $res=str_replace('$', '', $res);
               $res=(float)$res;
               $newarraybestprices[]=$res; 
                echo '<b>'.$res.'</b><br>';           
  
      }?>
  </div>


  
</div>



 
<!--LINK COMPRAR WALMART-->
 <div class="flex-container" style="line-height: 3.8em;display: none">
<?php
echo '<b>'.'LINK'.'</b><br>';
$hrefs = $xpath->evaluate("//*[@class='prateleira__name']");
    $arraylinks=[]; 
     for ($i = 0; $i <$hrefs->length; $i++) {
             $href = $hrefs->item($i);
             $res=$href->textContent;
          $res=strtolower($res);
           $res=str_replace('  ', ' ', $res);
              $res=str_replace(' ', '-', $res);
              $res=str_replace('-ala-dorado-', '-parboil-molinos', $res);
              $res=str_replace('
                í-', 'i-', $res);
              $res=str_replace('ñ', 'n', $res);
             $arraylinks[]=$res;

            //echo '<b>'.$res.'</b><br>';
            
  }
  $newarraylinks=[]; 
  for ($i = 0; $i <sizeof( $arraylinks); $i++) {
         $res=$arraylinks[($i)];
  $newarraylinks[]=$res;
              
         //OJO www.walmart.com.ar/arroz-parboil-molinos1-kg/p no lo puedo formar!!//
       //VER QUE HAY VACIONS QUE NO LOS ELIMINA EJ: https://www.walmart.com.ar/arroz-largo- fino-dos-hermanos-x-500-gr / p--------www.walmart.com.ar/arroz -parboil-primor-x-1-kg / p---------www.walmart.com.ar/ arroz-parboil-dos-hermanos-1-kg / p---------www.walmart.com.ar/arroz -doble-ala-1-kg / p----www.walmart .com.ar / arroz-preparado-gallo-verdeo-x-240-gr / p------www.walmart .com.ar / arroz-preparado-risotto-gallo-primavera-x-240-gr / p--------www.walmart .com.ar / arroz-preparado-risotto-gallo-mediterraneo-x-240-gr / p---------www.walmart .com.ar / arroz-preparado-mama-cocina-con-salsa-queso-x-200-gr / p---------//
       //OJO, NO ELIMINA EL TILDE www.walmart.com.ar/arroz-yamaní-gallo-integral-sin-tacc-x-500-gr/p// 


              $res=str_replace('-molinos-', '-', $res);
              $res='www.walmart.com.ar/'.$res.'/p';
           
              
              $res= trim($res);
              $res= rtrim($res);
              $res= ltrim($res);
              echo '<b>'.$res.'</b><br>';           
  
      }?>


 




  </div>
   
 

<!--VER PRODUCTO WALMART(LINK IMAGEN)--> 
<div class="flex-container" style="line-height: 1.2em;margin-top: 0.5em;display: none">
<?php
echo '<b>'.'IMAGENES'.'</b><br>';
$hrefs = $xpath->evaluate("//img/@src");
    $arrayimages=[]; 
     for ($i = 0; $i <$hrefs->length; $i++) {
             $href = $hrefs->item($i);
             $res=$href->textContent;   
            $res=str_replace(' ', '', $res);
            
             $arrayimages[]=$res;

             echo '<b>'.$res.'</b><br>';
            }

             for ($i = 0; $i <sizeof( $arrayimages); $i++) {

              
                //echo '<b>'.$arrayimages[($i)].'</b><br>';           
  
      }?>
  </div>

  <div class="flex-container" style="line-height: 1.2em;margin-top: 0.5em">
<?php
echo '<b>'.'PRODUCTOS'.'</b><br>';

 
     foreach ($commerces as $commerce) {
             $productscoto=$commerce->Coto;
             $productscarrefour=$commerce->Carrefour;
             $productswalmart=$commerce->Walmart;
             echo '<b>'.$productscoto.'</b><br>';
            if($productscarrefour!="NULL"){
               echo '<b>'.$productscarrefour.'</b><br>';
            }
             
      if($productswalmart!="NULL"){
               echo '<b>'.$productswalmart.'</b><br>';
            }


             
                }?>
  </div>
  <div class="flex-container" style="line-height: 3.8em;">

  <?php
  echo '<b>'.'PRECIO COTO'.'</b><br>';
 
$hrefs = $xpath->evaluate("//*[@class='second_price_discount_container']/span");

    $arrayprices=[]; 
     for ($i =0; $i <$hrefs->length; $i++) {
      
             $href = $hrefs->item($i);
             $res=$href->textContent;
            
             $res=str_replace('PRECIO CONTADO', '', $res);
             $res=str_replace('$', '', $res);   
             $res=str_replace('c / u  ', '', $res);  
             $res=str_replace('c/u', '', $res);         
              $res= trim($res);
              $res= rtrim($res);
              $res= ltrim($res);     




             $arrayprices[]=$res;



          //echo '<b>'.sizeof($arrayprices).'</b><br>';
          //echo '<b>'.$res.'</b><br>';
           }
            
  $newarrayprices=[]; 

             for ($i = 0; $i <sizeof( $arrayprices)/3; $i++) {

              $res=$arrayprices[($i)*3]; 
              
            



              $newarrayprices[]=$res;
              //echo '<b>'.sizeof($newarrayprices).'</b><br>';
             echo '<b>'.$res.'</b><br>';           
  
      }?>

  </div>
  <div class="flex-container" style="line-height: 3.8em;">
<?php
echo '<b>'.'PRODUCTO COTO'.'</b><br>';
$hrefs = $xpath->evaluate("//*[@class='descrip_full']");
    $arraynames=[]; 
     for ($i = 0; $i <$hrefs->length; $i++) {
             $href = $hrefs->item($i);
             $res=$href->textContent;
          
             $arraynames[]=$res;

            //echo '<b>'.$res.'</b><br>';
            
  }
  $newarraynames=[]; 
  for ($i = 0; $i <sizeof( $arraynames); $i++) {
         $res=$arraynames[($i)];
  $newarraynames[]=$res;
         $res=strtoupper($res);     
              //echo '<b>'.sizeof($newarraynames).'</b><br>';
               echo '<b>'.$res.'</b><br>';           
  
      }?>


 

  </div>

</div>
 



<div class="grid-container-uno" style=";margin-top: 60px">  




<!--NOMBRE PRODUCTO-->

<div class="flex-container" style="line-height: 3.8em;width: -10px">



@foreach ($commerces as $commerce)
@foreach ($cotos as $coto)

 <section class="container jumbotron shadow p-3 mb-5 bg-white rounded"style="height: 250px;text-align: center;width: 100%" >

<b><img src="{{$coto->Image}}" style="color: black; width="200" height="200" "><br>{{$coto->Producto}}</b><br>


</section>
@endforeach
@endforeach
</div>

</div>

































</section>
</body>
</html>
 